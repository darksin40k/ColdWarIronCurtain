add_namespace = SOV_Beria_Struggle

country_event = {

    id = SOV_Beria_Struggle.1
    title = "The Struggle for Power"
    desc = SOV_Beria_Struggle.1.d

    fire_only_once = yes
	is_triggered_only = yes


    option = {
        name = "What to do... What to do..."

        hidden_effect = {
            country_event = {
            days = 10 
            id = SOV_Beria_Struggle.2
            }
        }
    }
}
country_event = {

    id = SOV_Beria_Struggle.2
    title = "Launching a limited version of the Purge?"
    desc = SOV_Beria_Struggle.2.d

    fire_only_once = yes
	is_triggered_only = yes

    option = {
        name = "Semper Primus"

        country_event = {
            days = 15
            id = SOV_Beria_Struggle.3
            set_country_flag = infamy_2
            set_country_flag = support_2
        }
    }
    option = {
        name = "Better Follow Malenkov Cautiousness"
    }

}
country_event = {

    id = SOV_Beria_Struggle.3
    title = "Falsifying Elements Against Voroshilov"
    desc = SOV_Beria_Struggle.3.d

    fire_only_once = yes
	is_triggered_only = yes

    option = {
        name = "This might prove very useful later on"
        
        hidden_effect = {
            country_event = {
            id = SOV_Beria_Struggle.4
            days = 30
            }
        }
    }
    option = {
        name = "Comrade Voroshilov is white as snow!"

        hidden_effect = {
            country_event = {
                id = SOV_Beria_Struggle.42
                days = 50
            }
        }
    }

}
country_event = {

    id = SOV_Beria_Struggle.4
    title = "Of the Use of Forged Documents"
    desc = SOV_Beria_Struggle.4.d

    fire_only_once = yes
	is_triggered_only = yes
    
    option = {
        name = "Make him understand he's in trouble"
        hidden_effect = {
            country_event = {
                days = 80 
                id = SOV_Beria_Struggle.5
            }
        }
        if = {
            limit = {
                has_country_flag = infamy_2
                has_country_flag = support_2
            }
            clr_country_flag = infamy_2
            clr_country_flag = support_2 
            set_country_flag = infamy_4
            set_country_flag = support_5

            else = {
                set_country_flag = infamy_2
                set_country_flag = support_3
            }
        }
        
    }

    option = {
        name = "Incriminating Voroshilov would be insulting Comrade Stalin's Death!"
        hidden_effect = {
            country_event = {
            days = 30 
            id = SOV_Beria_Struggle.41
            }
        }    
    }

    

}
country_event = {

    id = SOV_Beria_Struggle.41
    title = "Preparing an Army Depoliticization Reform?"
    desc = SOV_Beria_Struggle.41.d

    fire_only_once = yes
	is_triggered_only = yes
    
    option = {
        name = "This will allow us to gain support of Zhukov!"
        if = {
            limit = {
                has_country_flag = support_2
            }
            clr_country_flag = support_2 
            set_country_flag = support_4
        
        else = {
            set_country_flag = support_2
            }
        }
        hidden_effect = {  
            country_event = {
            id = SOV_Beria_Struggle.5
            days = 50
            }
        } 
    }

    option = {
        name = "Let us bide our time"

        hidden_effect = {
            country_event = {
                id = SOV_Beria_Struggle.5
                days = 50
            }
        }
    }
    
}
country_event = {

    id = SOV_Beria_Struggle.42
    title = "Rallying Iron Lazar"
    desc = SOV_Beria_Struggle.42.d

    fire_only_once = yes
	is_triggered_only = yes
    
    option = {
        name = "We need to gather the Old Guard against the Khrushchevites!"

        country_event = {
            id = SOV_Beria_Struggle.5
            days = 30 
        }
        set_country_flag = old_guard_path
    }

    option = {
        name = "Compromise is the first step to losing ground!"
    }
}

country_event = {

    id = SOV_Beria_Struggle.5
    title = "About our Stance on the Berlin Situation"
    desc = SOV_Beria_Struggle.5.d

    fire_only_once = yes
	is_triggered_only = yes

    option = {
        name = "Send Molotov on a prolonged trip to calm the situation in Berlin"

        hidden_effect = {
            country_event = {
            id = SOV_Beria_Struggle.6
            days = 30
            }
        }
            
        if = {
            limit = {
            has_country_flag = infamy_4
            has_country_flag = support_5
            }
            clr_country_flag = infamy_4
            clr_country_flag = support_5
            set_country_flag = infamy_3
            set_country_flag = support_7
        }
        else_if = {
            limit = {
                has_country_flag = support_3
                has_country_flag = infamy_2
            }
            clr_country_flag = infamy_2
            set_country_flag = infamy_4
        }
        else_if = {
            limit = {
                has_country_flag = old_guard_path
            }
            #OLD GUARD PATH TO DO
        }
    }
    option = {
        name = "This poor old man is of no use, he can't harm us or our rivals! Don't send him"

        hidden_effect = {
            country_event = {
            id = SOV_Beria_Struggle.6
            days = 30
            }
        }

        if = {
            limit = {
                has_country_flag = support_3
                has_country_flag = infamy_2
            }
            clr_country_flag = infamy_2
            set_country_flag = infamy_4
        }
    }

}
country_event = {

    id = SOV_Beria_Struggle.6
    title = "Arresting Bulganin?"
    desc = SOV_Beria_Struggle.6.d

    fire_only_once = yes
	is_triggered_only = yes

    option = {
        name = "Arrest him by order of the MVD"

        if = {
            limit = {
                has_country_flag = infamy_3
                has_country_flag = support_7
            }
            clr_country_flag = infamy_3
            clr_country_flag = support_7
            set_country_flag = infamy_4
            set_country_flag = support_8


            hidden_effect = {

                country_event = {
                days = 30 
                id = SOV_Beria_Struggle.71

                ##Beria Potentially Winning Path##
                }   
            }
            
        }
        else_if = {
            limit = {
                has_country_flag = support_3
                has_country_flag = infamy_4
            }
            clr_country_flag = infamy_4
            clr_country_flag = support_3
            set_country_flag = infamy_5
            set_country_flag = support_4   

            hidden_effect = {

                country_event = {
                days = 30 
                id = SOV_Beria_Struggle.71

                ##Malenkov Winning Path##
                }   
            }
        }

    }
    option = {
        name = "Such a bold move would only weaken us"

        hidden_effect = {
            country_event = {
                id = SOV_Beria_Struggle.71
                days = 30
            }
        }
    }
}
country_event = {
    

    ##Beria Malenkov Winning Path Potentially##

    id = SOV_Beria_Struggle.71
    title = "The Assassination of Shepilov"
    desc = SOV_Beria_Struggle.71.d

    fire_only_once = yes
	is_triggered_only = yes


    option = {
        name = "Khrushchev will lose his popular platform!"

        ##Malenkov wins and Beria gets purged if support is high enough##

        if = {
            limit = {
                has_country_flag = support_4
                has_country_flag = infamy_5
            }
            hidden_effect = {
                country_event = {
                    days = 10 
                    id = SOV_Beria_Struggle.82
                }
            } 
        }
        else_if = {
            limit = {
                has_country_flag = infamy_4
                has_country_flag = support_8
            }
            hidden_effect = {
                country_event = {
                    days = 10 
                    id = SOV_Beria_Struggle.82
                }
            }
            
            else = {  ##Khrushchev ultimately wins because Malenkov couldn't gather enough support##
            hidden_effect = {
                
                load_focus_tree = SOV_Khruschev
		    retire_country_leader = yes
		    create_country_leader = {
			name = "Nikita Khrushchev"
			picture = "Nikita_Khrushchev.dds"
			ideology = marxism_leninism
			traits = {
				Popular_Premier
				Ingenuous_Reformer
				Eccentric_Research_Enthusiast
				Affable_Diplomat
			}
                country_event = 
                    id = news.1030
                    days = 5   
                }
            }         
        }
        }  
        
    
    }
    option = {
        name = "Purging too much would harm our goals... for now"

       ## BERIA with Malenkov as puppet wins WINS##

        hidden_effect = {
            country_event = {
                id = SOV_Beria_Struggle.81 
                days = 30
            }
        }
    }
}
country_event = {

    id = SOV_Beria_Struggle.81
    title = "Final Vote to Sideline Khrushchevites"
    desc = SOV_Beria_Struggle.81.d

    fire_only_once = yes
	is_triggered_only = yes

    option = {
        name = "Beria will assume Premiership"

        hidden_effect = {
            add_political_power = 1000
        }
    }
}
country_event = {

    id = SOV_Beria_Struggle.82
    title = "Final Vote to Sideline Khrushchevites"
    desc = SOV_Beria_Struggle.82.d

    fire_only_once = yes
	is_triggered_only = yes

    option = {
        name = "Malenkov will also assume Premiership"

        country_event = {
            days = 10 
            id = SOV_Beria_Struggle.9
        }
    }
}
country_event = {

    id = SOV_Beria_Struggle.9
    title = "Beria arrested and executed"
    desc = SOV_Beria_Struggle.9.d

    fire_only_once = yes
	is_triggered_only = yes

    option = {
        name = "He pushed too far his resources"
    }
}
country_event = {

    id = SOV_Beria_Struggle.10
    title = "Beria succesful in his bid for General Secretary"
    desc = SOV_Beria_Struggle.10.d 

    fire_only_once = yes 
    is_triggered_only = yes 

    option = {
        name = "Surely an unexpected result..." 

        retire_country_leader = yes 

        create_country_leader = {
            name = "Lavrenti Beria"
			picture = "Lavrentiy_Beria.dds"
			ideology = marxism_leninism
        }
        add_ideas = Malenkov_figurehead
    }
}
country_event = {

    id = SOV_Beria_Struggle.11
    title = "Malenkov consolidated his majority"
    desc = SOV_Beria_Struggle.11.d 

    fire_only_once = yes 
    is_triggered_only = yes 

    option = {
        name = "Will he be able to hold on to office though?" 

        add_ideas = Beria_shadow
    }
}
country_event = {

    id = SOV_Beria_Struggle.12
    title = "Soviet Union proposes a mutual diplomatic visit!"
    desc = SOV_Beria_Struggle.12

    fire_only_once = yes 
    is_triggered_only = yes

    option = {
        name = "Out of question, we should stick to our Atlantic-leaning policy" 

        add_threat = 1 

        SOV = {
            country_event = SOV_Beria_Struggle.13
        }
    } 
    option = {
        name = "Sure! This will be a great step towards Détente"

        SOV = {country_event = SOV_Beria_Struggle.21}

        hidden_effect = {

            random_list = {
                70 = {
                    add_popularity = {
                        ideology = communism 
                        popularity = 0.01
                    }
                }
                30 = {
                    add_political_power = 5
                }
            }
        }
    }
}
country_event = {

    id = SOV_Beria_Struggle.13
    title = "Praesidium attacked for its détente foreign policy after [ROOT.GetName] refused diplomatic visit." 
    desc = SOV_Beria_Struggle.13.d 

    is_triggered_only = yes 
    fire_only_once = yes 

    option = {
        name = "Why did [ROOT.GetName] refuse?"
        add_political_power = -50
    }
}
country_event = {

    id = SOV_Beria_Struggle.20
    title = "An invitation by the Soviet Praesidium..."
    desc = SOV_Beria_Struggle.20

    is_triggered_only = yes 
    fire_only_once = yes

    option = {
        name = "Out of question, we must roll them back!"

        hidden_effect = {
            add_threat = 3 
        }
        SOV = {
            country_event = SOV_Beria_Struggle.13
        }
    }
    option = {
        name = "Surely, this will work out well!"

        add_threat = -2

        SOV = {
            country_event = SOV_Beria_Struggle.21
        }
    }
}
country_event = {

    id = SOV_Beria_Struggle.21
    title = "[FROM.GetLeader] accepts and invites us for a diplomatic visit" 
    desc = SOV_Beria_Struggle.21.d 

    is_triggered_only = yes 
    fire_only_once = yes 

    option = {
        name = "Great!"
        add_political_power = 50
    }
}
country_event = {

    id = SOV_Beria_Struggle.22 
    title = "Soviet Union proposes to finance the ECSC Mediterranean Ports in France." 
    desc = SOV_Beria_Struggle.22.d 

    fire_only_once = yes
    is_triggered_only = yes 

    option = {
        name = "This will increase cooperation with our countries!"

        FRA = {
			add_opinion_modifier = {
				target = SOV
				modifier = large_increase
			}
		}
		SOV = {
			add_opinion_modifier = {
				target = FRA
				modifier = large_increase
			}
    	}

        SOV = {
            add_to_variable = {
                currentMoney = -750
            }

            195 = {
                     add_extra_state_shared_building_slots = 2
                        add_building_construction = {
                            type = office_park 
                            level = 2
                            instant_build = yes
                    }
                }
        }
        FRA = {
            add_popularity = {
                ideology = communism 
                popularity = 0.02
            }
            for_loop_effect = {
					end = influence_array^num
					value = v
					if = {
						limit = {
							check_variable = { influence_array^v = SOV }
						}
						add_to_variable = { influence_array_val^v = 750 }
						set_country_flag = found
					}
				}
				if = {
					limit = { NOT = { has_country_flag = found } }
						add_to_array = { influence_array = SOV.id }
						add_to_array = { influence_array_val = 750 }
				}
				clr_country_flag = found
				recalculate_influence = yes

                21 = {
                    add_extra_state_shared_building_slots = 2
                        add_building_construction = {
                            type = office_park 
                            level = 3
                            instant_build = yes
                        }
                    add_building_construction = {
									type = naval_base
									level = 5
									province = 11834
									instant_build = yes
								}
                    add_building_construction = {
									type = naval_base
									level = 3
									province = 911
									instant_build = yes
								}
                    add_building_construction = {
									type = naval_base
									level = 2
									province = 9909
									instant_build = yes
								}
            }
        }
    }
    option = {

        name = "Out of question, if Soviets penetrate our economy, we're doomed!"

        add_popularity = {
            ideology = communism
            popularity = -0.02
        }

        FRA = {
			add_opinion_modifier = {
				target = SOV
				modifier = small_decrease
			}
		}
		SOV = {
			add_opinion_modifier = {
				target = FRA
				modifier = small_decrease
			}
    	}
    }
}
country_event = {

    id = SOV_Beria_Struggle.23 
    title = "Soviet Union proposes to finance the ECSC Mediterranean Ports in Italy." 
    desc = SOV_Beria_Struggle.23.d 

    fire_only_once = yes
    is_triggered_only = yes 

    option = {
        name = "This will increase cooperation with our countries!"

        ITA = {
			add_opinion_modifier = {
				target = SOV
				modifier = large_increase
			}
		}
		SOV = {
			add_opinion_modifier = {
				target = ITA
				modifier = large_increase
			}
    	}

        SOV = {
            add_to_variable = {
                currentMoney = -750
            }

            195 = {
                     add_extra_state_shared_building_slots = 2
                        add_building_construction = {
                            type = office_park 
                            level = 2
                            instant_build = yes
                    }
                }
        }
        ITA = {
            add_popularity = {
                ideology = communism 
                popularity = 0.02
            }
            for_loop_effect = {
					end = influence_array^num
					value = v
					if = {
						limit = {
							check_variable = { influence_array^v = SOV }
						}
						add_to_variable = { influence_array_val^v = 750 }
						set_country_flag = found
					}
				}
				if = {
					limit = { NOT = { has_country_flag = found } }
						add_to_array = { influence_array = SOV.id }
						add_to_array = { influence_array_val = 750 }
				}
				clr_country_flag = found
				recalculate_influence = yes

                1136 = {
                    add_extra_state_shared_building_slots = 1
                        add_building_construction = {
                            type = office_park 
                            level = 1
                            instant_build = yes
                        }
                    add_building_construction = {
									type = naval_base
									level = 5
									province = 6788
									instant_build = yes
								}         
                    }
                117 = {
                    add_extra_state_shared_building_slots = 1
                        add_building_construction = {
                            type = office_park 
                            level = 1
                            instant_build = yes
                        }
                    add_building_construction = {
									type = naval_base
									level = 3
									province = 819
									instant_build = yes
								}
                    }
                115 = {
                    add_extra_state_shared_building_slots = 1
                        add_building_construction = {
                            type = office_park 
                            level = 1
                            instant_build = yes
                        }
                    add_building_construction = {
									type = naval_base
									level = 2
									province = 10074
									instant_build = yes
								}
                    }
        }
    }
    option = {

        name = "Out of question, if Soviets penetrate our economy, we're doomed!"

        add_popularity = {
            ideology = communism
            popularity = -0.02
        }

        ITA = {
			add_opinion_modifier = {
				target = SOV
				modifier = small_decrease
			}
		}
		SOV = {
			add_opinion_modifier = {
				target = ITA
				modifier = small_decrease
			}
    	}
    }
}
country_event = {

    id = SOV_Beria_Struggle.24
    title = "Soviets propose a Unified Deutschemark Zone"
    desc = SOV_Beria_Struggle.24.desc

    fire_only_once = yes 
    is_triggered_only = yes 

 #   option = {
 #       name = "Out of the question!"
#
 #       SOV = {
  #          country_event = SOV_Beria_Struggle.26
   #     }
    #}
    option = {
        name = "This might benefit Germany and Détente!"

        SOV = {
            country_event = SOV_Beria_Struggle.25
        }
    }
}
country_event = {

    id = SOV_Beria_Struggle.25
    title = "[FROM.GetName] accepts!"
    desc = SOV_Beria_Struggle.25.desc

    fire_only_once = yes 
    is_triggered_only = yes 

    option = {
        name = "Hopefully, everyone will..."
    }
}
country_event = {

    id = SOV_Beria_Struggle.26
    title = "[FROM.GetName] refuses!"
    desc = SOV_Beria_Struggle.26.desc

    fire_only_once = yes 
    is_triggered_only = yes 

    option = {
        set_country_flag = Unified_Rejected

        name = "Darn it!"
    }
}
country_event = {

    id = SOV_Beria_Struggle.27
    title = "Stimulus Package Size" 
    desc = SOV_Beria_Struggle.27.desc 

    fire_only_once = yes 
    is_triggered_only = yes 

    option = {

        name = "Invest 4000B for great returns!" 

        add_to_variable = {
            currentMoney = -4000
        }
        ROM = {
            add_timed_idea = {
                days = 2500 
                idea = huge_package
            }           
        }
        CZE = {
            add_timed_idea = {
                days = 2500 
                idea = huge_package
            }           
        }
        DDR = {
            add_timed_idea = {
                days = 2500 
                idea = huge_package
            }           
        }
        BUL = {
            add_timed_idea = {
                days = 2500 
                idea = huge_package
            }           
        }
        POL = {
            add_timed_idea = {
                days = 2500 
                idea = huge_package
            }           
        }
        HUN = {
            add_timed_idea = {
                days = 2500 
                idea = huge_package
            }           
        }
    }
    option = {

        name = "Invest 2500B for important returns!" 
        
        add_to_variable = {
            currentMoney = -2000
        }

        BUL = {
            add_timed_idea = {
                days = 2000 
                idea = important_package
            }
        }
        DDR = {
            add_timed_idea = {
                days = 2000 
                idea = important_package
            }
        }
        CZE = {
            add_timed_idea = {
                days = 2000 
                idea = important_package
            }
        }
        POL = {
            add_timed_idea = {
                days = 2000 
                idea = important_package
            }
        }
        ROM = {
            add_timed_idea = {
                days = 2000 
                idea = important_package
            }
        }
        HUN = {
            add_timed_idea = {
                days = 2000 
                idea = important_package
            }
        }
            
        
    }
    option = {

        name = "Invest 1000B for small returns!" 
        
        add_to_variable = {
            currentMoney = -1000
        }

        ROM = {
            add_timed_idea = {
                days = 1500 
                idea = small_package
            }
        }
        BUL = {
            add_timed_idea = {
                days = 1500 
                idea = small_package
            }
        }
        HUN = {
            add_timed_idea = {
                days = 1500 
                idea = small_package
            }
        }
        POL = {
            add_timed_idea = {
                days = 1500 
                idea = small_package
            }
        }
        DDR = {
            add_timed_idea = {
                days = 1500 
                idea = small_package
            }
        }
        CZE = {
            add_timed_idea = {
                days = 1500 
                idea = small_package
            }
        }
            
    }
}







}