arab_league_monthly_infamy_calc = {
	clamp_variable = {
		var = badboy
		min = 0
		max = 100
	}
    add_to_variable = {
        badboy = generated_badboy_current
    }
    set_variable = {
        generated_badboy = THIS.has_added_tension_amount 
    }
    set_variable = {
        generated_badboy_current = generated_badboy 
    }
    multiply_variable = { generated_badboy_current = -1 }
    add_to_variable = { badboy = generated_badboy }
    if = {
        limit = {
            has_idea = gulag_politic
        }
        add_to_variable = {
            badboy = 0.10
        }
    }
    if = {
        limit = {
            has_idea = repression
        }
        add_to_variable = {
            badboy = 0.05
        }
    }
    if = {
        limit = {
            has_idea = gulag_politic_expanded
        }
        add_to_variable = {
            badboy = 0.15
        }
    }
    if = {
        limit = {
            has_idea = rightwing_deathsquads
        }
        add_to_variable = {
            badboy = 0.15
        }
    }
    if = {
        limit = {
            has_idea = leftwing_deathsquads
        }
        add_to_variable = {
            badboy = 0.15
        }
    }
    if = {
        limit = {
            has_idea = cocacolawing_deathsquads
        }
        add_to_variable = {
            badboy = 0.15
        }
    }
    if = {
        limit = {
            has_idea = martial_law_perm
        }
        add_to_variable = {
            badboy = 0.25
        }
    }
    if = {
        limit = {
            has_idea = opposition_banned
        }
        add_to_variable = {
            badboy = 0.25
        }
    }
    if = {
        limit = {
            has_idea = policy_voting_temp_0
        }
        add_to_variable = {
            badboy = 0.1
        }
    }
    if = {
        limit = {
            has_idea = policy_religion_temp_0
        }
        add_to_variable = {
            badboy = 0.1
        }
    }
    if = {
        limit = {
            has_idea = policy_religion_temp_0a
        }
        add_to_variable = {
            badboy = 0.1
        }
    }
    if = {
        limit = {
            has_idea = policy_media_temp_0
        }
        add_to_variable = {
            badboy = 0.1
        }
    }
    if = {
        limit = {
            has_idea = policy_women_temp_0
        }
        add_to_variable = {
            badboy = 0.1
        }
    }
    if = {
        limit = {
            has_idea = policy_minorities_temp_0
        }
        add_to_variable = {
            badboy = 0.15
        }
    }
    if = {
        limit = {
            check_variable = { apartheidValue > 0 }
        }
        add_to_variable = {
            badboy = 0.15
        }
    }
    if = {
        limit = {
            check_variable = { segregationValue < 0 }
        }
        add_to_variable = {
            badboy = 0.05
        }
    }
        

    subract_from_variable = {
        badboy = -0.25
    }
}

ARAB_LEAGUE_ai_vote_sorting = {

	if = {
        limit = {  
            OR = {
                check_variable = { QAT.arab_league_action_set = 0 }
                check_variable = { QAT.arab_league_action_set = 1 }
                check_variable = { QAT.arab_league_action_set = 2 }
                check_variable = { QAT.arab_league_action_set = 3 }
                check_variable = { QAT.arab_league_action_set = 4 }
                check_variable = { QAT.arab_league_action_set = 5 }
                check_variable = { QAT.arab_league_action_set = 6 }
                check_variable = { QAT.arab_league_action_set = 7 }
                check_variable = { QAT.arab_league_action_set = 8 }
				check_variable = { QAT.arab_league_action_set = 9 }
                check_variable = { QAT.arab_league_action_set = 10 }
				check_variable = { QAT.arab_league_action_set = 11 }
                check_variable = { QAT.arab_league_action_set = 12 }
                check_variable = { QAT.arab_league_action_set = 13 }
                check_variable = { QAT.arab_league_action_set = 14 }
                check_variable = { QAT.arab_league_action_set = 15 }
                check_variable = { QAT.arab_league_action_set = 16 }
                                
               }
            }
            
            if = {
                limit = {
                    OR = {
                        tag = QAT.arab_league_nation_target
                        var:QAT.arab_league_nation_target = {
                            is_subject_of = ROOT
                        }
                        
						meta_trigger = {
							text = {
								has_opinion = {
									target = [CHECKTAG]
									value > 30
								}
							}
							CHECKTAG = "[?var:QAT.arab_league_nation_target.GetTag]"
						}
                    }
                }
                add_to_array = { QAT.arab_league_vote_no_list = THIS.id }
                add_to_variable = { QAT.arab_league_no_count = 1 }
                set_country_flag = ARAB_LEAGUE_NO_ONGOING
				
				randomize_variable = {
										  var = randomised_acceptance
										  distribution = uniform
										  min = 10
										  max = 29
				}
            }
			
            else_if = {
                limit = {
                    OR = {
						meta_trigger = {
							text = {
								has_opinion = {
									target = [CHECKTAG]
									value < 0
								}
							}
							CHECKTAG = "[?var:QAT.arab_league_nation_target.GetTag]"
						}
                        has_war_with = QAT.arab_league_nation_target
                    }

                    
                }
                add_to_array = { QAT.arab_league_vote_yes_list = THIS.id }
                add_to_variable = { QAT.arab_league_yes_count = 1 }
                set_country_flag = ARAB_LEAGUE_YES_ONGOING
				
				randomize_variable = {
										  var = randomised_acceptance
										  distribution = uniform
										  min = 70
										  max = 90
				}
				
            }
			
            else = {
                add_to_array = { QAT.arab_league_vote_abstain_list = THIS.id }
                add_to_variable = { QAT.arab_league_abstain_count = 1 }  
                set_country_flag = ARAB_LEAGUE_ABSTAIN_ONGOING   

				randomize_variable = {
										  var = randomised_acceptance
										  distribution = uniform
										  min = 40
										  max = 60
				}
				
            }
        }
	
}

ARAB_LEAGUE_array_reset = {
							
			clear_array = QAT.arab_league_vote_abstain_list
			clear_array = QAT.arab_league_vote_no_list
			clear_array = QAT.arab_league_vote_veto_list
			clear_array = QAT.arab_league_vote_yes_list

}

ARAB_LEAGUE_ai_influence_vote = {

							if = {
									limit = {
											check_variable = {randomised_acceptance < 33}
											}
									    add_to_array = { QAT.arab_league_vote_no_list = THIS.id }
										add_to_variable = { QAT.arab_league_no_count = 1 }
										set_country_flag = ARAB_LEAGUE_NO_ONGOING
							
							}
							
							else_if = {
									limit = {
											check_variable = {randomised_acceptance > 66}
											}
									     add_to_array = { QAT.arab_league_vote_yes_list = THIS.id }
										 add_to_variable = { QAT.arab_league_yes_count = 1 }
										 set_country_flag = ARAB_LEAGUE_YES_ONGOING
							
							}
							
							else={
									add_to_array = { QAT.arab_league_vote_abstain_list = THIS.id }
									add_to_variable = { QAT.arab_league_abstain_count = 1 }  
									set_country_flag = ARAB_LEAGUE_ABSTAIN_ONGOING   
							
								}


}

ARAB_LEAGUE_influence_actions = {
									
									


}

