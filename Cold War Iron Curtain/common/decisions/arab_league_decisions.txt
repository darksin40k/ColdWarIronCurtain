variables_calculation_category = {

	ARAB_LEAGUE_influence_calc = {

		icon = generic_decision
		visible = {
			tag = QAT
		}
		available = {
			always = no
		}

		activation = {
			always = no
		}

		#is_good = yes

		selectable_mission = yes
		days_mission_timeout = 3

		available = {
			
		}
		
		ai_will_do = {
			factor = 0
		}
		
		fire_only_once = no
		
		
		fixed_random_seed = no
		
		cost = 0
		
		timeout_effect = {
			set_variable = {influence_confirmed = 0 }
			add_to_variable = {refresh_arab_league= 1 }		

			EGY = {
					set_variable = { root.influence_chosen = 0 }
					set_variable = { influence_chosen = 0 }
					set_variable = { influence_countdown = 0}
					set_variable = {influence_confirmed = 0 }

					}
		}
	}
	
	#cleanup and reset after vote completed
	ARAB_LEAGUE_Vote_Cleanuo = {

		icon = generic_decision
		visible = {
			tag = QAT
		}
		available = {
			always = no
		}

		activation = {
			always = no
		}

		#is_good = yes

		selectable_mission = yes
		days_mission_timeout = 15

		available = {
			
		}
		ai_will_do = {
			factor = 0
		}
		fire_only_once = no
		
		
		fixed_random_seed = no
		
		cost = 0
		
		timeout_effect = {
			set_variable = { arab_league_veto_count = 0 }
			set_variable = { arab_league_yes_count = 0 }
			set_variable = { arab_league_no_count = 0 }
			set_variable = { arab_league_abstain_count = 0 }
			set_variable = { QAT.arab_league_state_target_owner = 0 }
			set_variable = { QAT.arab_league_action_set = 0 }
			set_variable = { QAT.arab_league_nation_target = 0 }

			set_variable = { root.arab_league_state_target_owner = 0 }
			set_variable = { root.arab_league_action_set = 0 }
			set_variable = { root.arab_league_nation_target = 0 }			

			clear_array = QAT.arab_league_vote_abstain_list
			clear_array = QAT.arab_league_vote_no_list
			clear_array = QAT.arab_league_vote_veto_list
			clear_array = QAT.arab_league_vote_yes_list

			clr_country_flag = Current_ARAB_LEAGUE_Vote
			clr_country_flag = ARAB_LEAGUE_Vote_Cleanup
			clr_country_flag = ARAB_LEAGUE_YES_ONGOING
			clr_country_flag = ARAB_LEAGUE_VETO_ONGOING
			clr_country_flag = ARAB_LEAGUE_ABSTAIN_ONGOING
			clr_country_flag = ARAB_LEAGUE_NO_ONGOING
			
			#sets display mode to base
			
							
			MOR = { 
					set_variable = {main_screen = 0} 
					set_variable = {resolution_confirmed = 0}
					set_variable = {influence_countdown = 0}
			}
			
			ALG = { 
					set_variable = {main_screen = 0} 
					set_variable = {resolution_confirmed = 0}
					set_variable = {influence_countdown = 0}
			}
			
			TUN = { 
					set_variable = {main_screen = 0} 
					set_variable = {resolution_confirmed = 0}
					set_variable = {influence_countdown = 0}
			}
			
			LBA = { 
					set_variable = {main_screen = 0} 
					set_variable = {resolution_confirmed = 0}
					set_variable = {influence_countdown = 0}
			}
			
			MOR= { 
					set_variable = {main_screen = 0} 
					set_variable = {resolution_confirmed = 0}
					set_variable = {influence_countdown = 0}
			}
			
			EGY = { 
					set_variable = {main_screen = 0} 
					set_variable = {resolution_confirmed = 0}
					set_variable = {influence_countdown = 0}
			}
			
			JOR = { 
					set_variable = {main_screen = 0} 
					set_variable = {resolution_confirmed = 0}
					set_variable = {influence_countdown = 0}
			}
			
			SYR = { 
					set_variable = {main_screen = 0} 
					set_variable = {resolution_confirmed = 0}
					set_variable = {influence_countdown = 0}
			}
			
			LEB = { 
					set_variable = {main_screen = 0} 
					set_variable = {resolution_confirmed = 0}
					set_variable = {influence_countdown = 0}
			}
			
			IRQ = { 
					set_variable = {main_screen = 0} 
					set_variable = {resolution_confirmed = 0}
					set_variable = {influence_countdown = 0}
			}
			
			KUW= { 
					set_variable = {main_screen = 0} 
					set_variable = {resolution_confirmed = 0}
					set_variable = {influence_countdown = 0}
			}
			
			SAU = { 
					set_variable = {main_screen = 0} 
					set_variable = {resolution_confirmed = 0}
					set_variable = {influence_countdown = 0}
			}
			
			YEM = { 
					set_variable = {main_screen = 0} 
					set_variable = {resolution_confirmed = 0}
					set_variable = {influence_countdown = 0}
			}
			
			OMA = { 
					set_variable = {main_screen = 0} 
					set_variable = {resolution_confirmed = 0}
					set_variable = {influence_countdown = 0}
			}
			
			UAE = { 
					set_variable = {main_screen = 0} 
					set_variable = {resolution_confirmed = 0}
					set_variable = {influence_countdown = 0}
			}
			
			QAT= { 
					set_variable = {main_screen = 0} 
					set_variable = {resolution_confirmed = 0}
					set_variable = {influence_countdown = 0}
			}
			
			BHR= { 
					set_variable = {main_screen = 0} 
					set_variable = {resolution_confirmed = 0}
					set_variable = {influence_countdown = 0}
			}
			
			SOM= { 
					set_variable = {main_screen = 0} 
					set_variable = {resolution_confirmed = 0}
					set_variable = {influence_countdown = 0}
			}
			
			SUD= { 
					set_variable = {main_screen = 0} 
					set_variable = {resolution_confirmed = 0}
					set_variable = {influence_countdown = 0}
			}
			
			add_to_variable = {refresh_arab_league= 1 }			
		}
	}
	
	##vote effects
	ARAB_LEAGUE_Vote = {

		icon = generic_decision
		visible = {
			tag = QAT
		}
		available = {
			always = no
		}

		activation = {
			always = no
		}

		#is_good = yes

		selectable_mission = yes
		days_mission_timeout = 10

		available = {
			
		}
		ai_will_do = {
			factor = 0
		}
		fire_only_once = no
		
		
		fixed_random_seed = no
		
		cost = 0
		
		timeout_effect = {
			if = {
				limit = {
					check_variable = { arab_league_veto_count < 1 }
					check_variable = { arab_league_yes_count > arab_league_no_count }
				}
				if = {
					limit = {
						check_variable = { QAT.arab_league_action_set = 0 }
					}
					news_event = UN_RESOLUTION.0
					var:QAT.arab_league_nation_target = {
						country_event = UN_RESOLUTION.1
					}
				}
				if = {
					limit = {
						check_variable = { QAT.arab_league_action_set = 1 }
					}
					news_event = UN_RESOLUTION.2
					var:QAT.arab_league_nation_target = {
						country_event = UN_RESOLUTION.3
					}
				}
				if = {
					limit = {
						check_variable = { QAT.arab_league_action_set = 2 }
					}
					news_event = UN_RESOLUTION.4
					var:QAT.arab_league_nation_target = {
						add_timed_idea = {
							idea = influence_increase_cost
							days = 3650
						}
					}
				}
				if = {
					limit = {
						check_variable = { QAT.arab_league_action_set = 3 }
					}
					var:QAT.arab_league_nation_target = {
						add_timed_idea = {
							idea = national_asset_freeze
							days = 3650
						}
					}
					news_event = UN_RESOLUTION.5
				}
				if = {
					limit = {
						check_variable = { QAT.arab_league_action_set = 4 }
					}
					var:QAT.arab_league_nation_target = {
						add_timed_idea = {
							idea = officials_sanctioned
							days = 3650
						}
					}
					news_event = UN_RESOLUTION.6
				}
				if = {
					limit = {
						check_variable = { QAT.arab_league_action_set = 5 }
					}
					var:QAT.arab_league_nation_target = {
						add_ideas = UN_Trade_Sanctions
					}
					news_event = UN_RESOLUTION.7
				}
				if = {
					limit = {
						check_variable = { QAT.arab_league_action_set = 6 }
					}
					var:QAT.arab_league_nation_target = {
						add_ideas = UN_Weapon_Trade_Ban
					}
					news_event = UN_RESOLUTION.8
				}
				if = {
					limit = {
						check_variable = { QAT.arab_league_action_set = 7 }
					}
					news_event = UN_RESOLUTION.9
					var:QAT.arab_league_nation_target = {
						country_event = UN_RESOLUTION.10
					}
				}
				if = {
					limit = {
						check_variable = { QAT.arab_league_action_set = 8 }
					}
					news_event = UN_RESOLUTION.11
					var:QAT.arab_league_nation_target = {
						country_event = UN_RESOLUTION.12
					}
				}
				if = {
					limit = {
						check_variable = { QAT.arab_league_action_set = 9 }
					}
					#State One
					news_event = UN_RESOLUTION.13
					var:QAT.arab_league_state_target = {
						owner = {
							country_event = UN_RESOLUTION.14
						}
					}
				}
				if = {
					limit = {
						check_variable = { QAT.arab_league_action_set = 10 }
					}
					news_event = UN_RESOLUTION.15
					var:QAT.arab_league_nation_target = {
						set_country_flag = UN_Peacekeepers_Enabled
					}
				}
				if = {
					limit = {
						check_variable = { QAT.arab_league_action_set = 11 }
					}
					news_event = UN_RESOLUTION.16
					var:QAT.arab_league_nation_target = {
						every_enemy_country = {
							country_event = UN_RESOLUTION.17
							#Peace Agreement 	UN_RESOLUTION.18
							#Rejection 			UN_RESOLUTION.19
						}
					}
				}
				if = {
					limit = {
						check_variable = { QAT.arab_league_action_set = 12 }
					}
					news_event = UN_RESOLUTION.20
					UNS = {
						create_faction = "The United Nations"
						add_to_faction = var:QAT.arab_league_nation_target
					}
					#QAT.arab_league_nation_target = {
					#	#create_unit		#Automatic Peacekeepers
					#}
				}
				if = {
					limit = {
						check_variable = { QAT.arab_league_action_set = 13 }
					}
					news_event = UN_RESOLUTION.21
					UNS = {
						create_faction = "The United Nations"
						add_to_faction = var:QAT.arab_league_nation_target
					}
					every_country = {
						NOT = {
							has_war_with = var:QAT.arab_league_nation_target
						}
						country_event = UN_RESOLUTION.22
					}
				}
				if = {
					limit = {
						check_variable = { QAT.arab_league_action_set = 14 }
					}
					var:QAT.arab_league_nation_target = {
						remove_ideas = UN_Trade_Sanctions
					}
					news_event = UN_RESOLUTION.23
				}
				if = {
					limit = {
						check_variable = { QAT.arab_league_action_set = 15 }
					}
					var:QAT.arab_league_nation_target = {
						remove_ideas = UN_Weapon_Trade_Ban
					}
					news_event = UN_RESOLUTION.24
				}
				if = {
					limit = {
						check_variable = { QAT.arab_league_action_set = 16 }
					}
					news_event = UN_RESOLUTION.25
					every_country = {
						limit = {
							any_owned_state = {
								is_core_of = var:QAT.arab_league_nation_target
							}
						}
						country_event = UN_RESOLUTION.26
						#UN_RESOLUTION.27		Rejection
						#UN_RESOLUTION.28		Acceptance
					}
				}
			}	
			if = {
				limit = {
					check_variable = { arab_league_veto_count < 1 }
					check_variable = { arab_league_yes_count < un_no_count }
				}
				news_event = UN_RESOLUTION.29
			}
			if = {
				limit = {
					check_variable = { arab_league_veto_count > 0 }
				}
				news_event = UN_RESOLUTION.30
			}
			
			set_country_flag = ARAB_LEAGUE_Vote_Cleanup
		}
	}

}

arab_league_decision_category = {

	arab_league_join = {

		icon = generic_decision
				
		
		available = {
				is_subject = no
		}
		
		visible = {
					NOT = {
					has_country_flag = arab_league_member
					}
		}
			
		ai_will_do = {
			factor = 100
		}
		
		complete_effect = {
							set_country_flag = arab_league_member
							clr_country_flag = non_arab_league
		}
		
		fire_only_once = yes
				
		fixed_random_seed = no
		
		cost = 1000


	}
	
	arab_league_leave = {

		icon = generic_decision
		
		
		
		available = {
		
			has_country_flag = arab_league_member
		}
		
		visible = {
					NOT = {
					has_country_flag = non_arab_league
					}
		}
		
		
		ai_will_do = {
			factor = 0
		}
		
		complete_effect = {
							clr_country_flag = arab_league_member
							clr_country_flag = arab_league_founding_member
		}
		
		fire_only_once = yes
				
		fixed_random_seed = no
		
		cost = 3000


	}

}	